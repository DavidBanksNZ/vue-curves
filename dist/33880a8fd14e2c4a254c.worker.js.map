{"version":3,"sources":["webpack:///33880a8fd14e2c4a254c.worker.js","webpack:///webpack/bootstrap 33880a8fd14e2c4a254c","webpack:///./src/web-worker/_utils.js","webpack:///./src/web-worker/_dragon.js","webpack:///./src/web-worker/_hilbert.js","webpack:///./src/web-worker/_koch.js","webpack:///./src/web-worker/worker.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","deg2Rad","deg","Math","PI","rotatePt","pt","angle","center","_cos","cos","_sin","sin","ptTranslated","ptRotated","pairs","arr","map","val","slice","__WEBPACK_IMPORTED_MODULE_0__utils__","Dragon","calculatePoints","data","size","width","height","x0","y0","pt1","pt2","pts","N","_pairs","numPairs","length","ptGroups","pair","j","getFlatValues","flat","getPointsBetween","right","Array","concat","apply","dX","dY","isAngled","midPoint","a","b","aIsEast","isVertical","direction","abs","_toConsumableArray","isArray","arr2","from","_extends","assign","target","arguments","source","key","translate","points","x","y","rotate","rad","flip","reverse","Hilbert","prevPoints","fill","numRows","min","cellSize","halfCellSize","currCellSpacing","halfCurrCellSpacing","Koch","opts","full","centroid","basePts","refPt","push","reduce","accum","calculateSegmentPoints","theta","atan","L","sqrt","pow","segmentLength","h","midPts","midPtsRotated","midPtsTranslated","send","postMessage","JSON","stringify","default","onmessage","e","algorithm","input","output","error","message"],"mappings":"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","file":"33880a8fd14e2c4a254c.worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = deg2Rad;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = rotatePt;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = pairs;\n/**\n * Convert degrees to radians\n * @param deg\n * @returns {number}\n */\nfunction deg2Rad(deg) {\n\treturn deg * Math.PI / 180;\n}\n\n/**\n * Rotate a point in 2D space about the given center point.\n * @param pt    - the point [x,y] to rotate\n * @param angle - anticlockwise rotation in radians\n * @param center - optional center point to rotate around, default is [0, 0]\n * @returns {number[]}\n */\nfunction rotatePt(pt, angle, center) {\n\tif (angle === 0) {\n\t\treturn pt;\n\t}\n\tif (!center) {\n\t\tcenter = [0, 0];\n\t}\n\tvar _cos = Math.cos(angle);\n\tvar _sin = Math.sin(angle);\n\tvar ptTranslated = [pt[0] - center[0], pt[1] - center[1]];\n\tvar ptRotated = [_cos * ptTranslated[0] - _sin * ptTranslated[1], _sin * ptTranslated[0] + _cos * ptTranslated[1]];\n\n\t// translate back\n\treturn [center[0] + ptRotated[0], center[1] + ptRotated[1]];\n}\n\n/**\n * Return an array containing consecutive pairs of all points in the input\n * array.\n * @param arr\n * @returns {Array<any[]>}\n */\nfunction pairs(arr) {\n\treturn arr.map(function (val, i) {\n\t\treturn i > 0 ? [arr[i - 1], arr[i]] : null;\n\t}).slice(1);\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\n\n\nvar Dragon = {\n\tcalculatePoints: function calculatePoints(data) {\n\n\t\t// Completed curve has aspect ratio 1.502\n\n\t\tvar aspect = 1.502;\n\t\tvar size = void 0; // refers to smaller dimension, height in this case\n\n\t\tif (data.width >= aspect * data.height) {\n\t\t\tsize = data.height - 50;\n\t\t} else {\n\t\t\tsize = (data.width - 50) / aspect;\n\t\t}\n\n\t\tsize /= aspect;\n\n\t\t// Theoretically use 0.5 to offset, but centroid gets skewed to top-left\n\t\t// because of the larger size changes caused by rotations during earlier\n\t\t// iterations. Using the below offsets gives a good center approximation\n\t\tvar x0 = data.width / 2 - 0.42 * size * aspect;\n\t\tvar y0 = data.height / 2 + 0.38 * size / aspect;\n\n\t\tvar pt1 = [x0, y0];\n\t\tvar pt2 = [x0 + size * aspect, y0];\n\t\tvar pts = [pt1, pt2];\n\t\tvar i = 0;\n\n\t\tvar _loop = function _loop() {\n\t\t\tvar _pairs = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"c\" /* pairs */])(pts);\n\t\t\tvar numPairs = _pairs.length;\n\t\t\tvar ptGroups = _pairs.map(function (pair, j) {\n\t\t\t\tvar getFlatValues = i < data.N ? false : data.flat;\n\t\t\t\treturn Dragon.getPointsBetween(pair[0], pair[1], getFlatValues, { right: j % 2 === 0 });\n\t\t\t}).map(function (pts, j) {\n\t\t\t\treturn j + 1 < numPairs ? pts.slice(0, -1) : pts;\n\t\t\t});\n\n\t\t\tpts = Array.prototype.concat.apply([], ptGroups);\n\t\t};\n\n\t\twhile (++i <= data.N) {\n\t\t\t_loop();\n\t\t}\n\n\t\treturn pts;\n\t},\n\tgetPointsBetween: function getPointsBetween(pt1, pt2, flat, data) {\n\n\t\tif (flat) {\n\t\t\tvar center = [(pt1[0] + pt2[0]) / 2, (pt1[1] + pt2[1]) / 2];\n\t\t\treturn [pt1, center, pt2];\n\t\t}\n\n\t\tvar dX = pt2[0] - pt1[0];\n\t\tvar dY = pt2[1] - pt1[1];\n\n\t\tvar isAngled = dX !== 0 && dY !== 0;\n\t\tvar midPoint = void 0;\n\n\t\tif (!isAngled) {\n\t\t\tvar isVertical = dX === 0;\n\t\t\tvar direction = void 0;\n\t\t\tif (isVertical) {\n\t\t\t\tdirection = dY < 0 && data.right || dY > 0 && !data.right ? -1 : 1;\n\t\t\t\tmidPoint = [pt1[0] + direction * Math.abs(dY) / 2, (pt1[1] + pt2[1]) / 2];\n\t\t\t} else {\n\t\t\t\tdirection = dX < 0 && data.right || dX > 0 && !data.right ? 1 : -1;\n\t\t\t\tmidPoint = [(pt1[0] + pt2[0]) / 2, pt1[1] + direction * Math.abs(dX) / 2];\n\t\t\t}\n\t\t} else {\n\t\t\tvar a = [pt1[0], pt2[1]];\n\t\t\tvar b = [pt2[0], pt1[1]];\n\t\t\tvar aIsEast = a[0] < b[0];\n\t\t\tif (dY < 0 && data.right || dY > 0 && !data.right) {\n\t\t\t\tmidPoint = aIsEast ? a : b;\n\t\t\t} else {\n\t\t\t\tmidPoint = aIsEast ? b : a;\n\t\t\t}\n\t\t}\n\n\t\treturn [pt1, midPoint, pt2];\n\t}\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Dragon);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\nvar translate = function translate(points, x, y) {\n\treturn points.map(function (pt) {\n\t\treturn [pt[0] + x, pt[1] + y];\n\t});\n};\n\nvar rotate = function rotate(points, center, angle) {\n\tvar rad = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"a\" /* deg2Rad */])(angle);\n\treturn points.map(function (pt) {\n\t\treturn __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* rotatePt */])(pt, rad, center);\n\t});\n};\n\nvar flip = function flip(points, center, angle) {\n\treturn rotate(points, center, angle).reverse();\n};\n\nvar Hilbert = {\n\tcalculatePoints: function calculatePoints(data) {\n\n\t\tif (data.flat) {\n\t\t\t// Get points for previous iteration...\n\t\t\tvar prevPoints = Hilbert.calculatePoints(_extends({}, data, {\n\t\t\t\tflat: false,\n\t\t\t\tN: data.N - 1\n\t\t\t}));\n\t\t\t// ... then replicate each point 4 times\n\t\t\treturn Array.prototype.concat.apply([], prevPoints.map(function (val) {\n\t\t\t\treturn new Array(4).fill(val);\n\t\t\t}));\n\t\t}\n\n\t\tvar numRows = Math.pow(2, data.N);\n\t\tvar size = Math.min(data.width, data.height) - 20;\n\t\tvar x0 = data.width / 2 - size / 2;\n\t\tvar y0 = data.height / 2 - size / 2;\n\n\t\tvar cellSize = size / numRows;\n\t\tvar halfCellSize = cellSize / 2;\n\n\t\tvar points = translate([[halfCellSize, halfCellSize], [halfCellSize, 3 * halfCellSize], [3 * halfCellSize, 3 * halfCellSize], [3 * halfCellSize, halfCellSize]], x0, y0);\n\n\t\tfor (var i = 2; i <= data.N; i++) {\n\t\t\tvar currCellSpacing = cellSize * Math.pow(2, i - 1);\n\t\t\tvar halfCurrCellSpacing = currCellSpacing / 2;\n\t\t\tpoints = [].concat(_toConsumableArray(flip(points, [x0 + halfCurrCellSpacing, y0 + halfCurrCellSpacing], -90)), _toConsumableArray(translate(points, 0, currCellSpacing)), _toConsumableArray(translate(points, currCellSpacing, currCellSpacing)), _toConsumableArray(flip(translate(points, currCellSpacing, 0), [x0 + 3 * halfCurrCellSpacing, y0 + halfCurrCellSpacing], 90)));\n\t\t}\n\n\t\treturn points;\n\t}\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Hilbert);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\nvar Koch = {\n\tcalculatePoints: function calculatePoints(data) {\n\n\t\tif (!data.opts.full) {\n\n\t\t\t// Cesàro\n\t\t\treturn Koch.calculateSegmentPoints([0, 0], [data.width, 0], data.flat, data.N, data.opts);\n\t\t} else {\n\n\t\t\tdata.opts.angle = 60;\n\t\t\tvar size = Math.min(data.width, data.height) - 20;\n\t\t\tvar centroid = [data.width / 2, data.height / 2];\n\t\t\tvar basePts = [];\n\t\t\tvar refPt = [centroid[0], centroid[1] + size / 2];\n\n\t\t\tfor (var i = 0; i < 3; i++) {\n\t\t\t\tvar angle = -__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"a\" /* deg2Rad */])(120 * i);\n\t\t\t\tbasePts.push(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* rotatePt */])(refPt, angle, centroid));\n\t\t\t}\n\n\t\t\t// complete the loop\n\t\t\tbasePts.push(basePts[0]);\n\n\t\t\t// for each segment, calculate the points along that segment, reduce into single array.\n\t\t\tvar basePtPairs = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"c\" /* pairs */])(basePts);\n\t\t\treturn basePtPairs.reduce(function (accum, pair) {\n\t\t\t\treturn accum.concat(Koch.calculateSegmentPoints(pair[0], pair[1], data.flat, data.N, data.opts));\n\t\t\t}, []);\n\t\t}\n\t},\n\tcalculateSegmentPoints: function calculateSegmentPoints(pt1, pt2, flat, N, opts) {\n\t\tvar pts = [pt1, pt2];\n\t\tvar i = 0;\n\n\t\tvar _loop = function _loop() {\n\t\t\tvar _pairs = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"c\" /* pairs */])(pts);\n\t\t\tvar numPairs = _pairs.length;\n\t\t\tvar ptGroups = _pairs.map(function (pair, j) {\n\t\t\t\tvar getFlatValues = i < N ? false : flat;\n\t\t\t\treturn Koch.getPointsBetween(pair[0], pair[1], getFlatValues, opts);\n\t\t\t}).map(function (pts, j) {\n\t\t\t\treturn j + 1 < numPairs ? pts.slice(0, -1) : pts;\n\t\t\t});\n\n\t\t\tpts = Array.prototype.concat.apply([], ptGroups);\n\t\t};\n\n\t\twhile (++i <= N) {\n\t\t\t_loop();\n\t\t}\n\n\t\treturn pts;\n\t},\n\tgetPointsBetween: function getPointsBetween(pt1, pt2, flat, opts) {\n\n\t\tvar dX = pt2[0] - pt1[0];\n\t\tvar dY = pt2[1] - pt1[1];\n\n\t\t// angle between pt1 and pt2\n\t\tvar theta = Math.atan(dY / dX);\n\t\tif (dX < 0) {\n\t\t\ttheta += Math.PI;\n\t\t}\n\n\t\t// length of line joining pts\n\t\tvar L = Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\n\n\t\tvar segmentLength = 0.5 * L / (1 + Math.sin(0.5 * __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"a\" /* deg2Rad */])(opts.angle)));\n\t\tvar h = Math.sqrt(L * (segmentLength - L / 4));\n\n\t\t// Now calculate points along that straight line segment,\n\t\t// with pts translated such that pt1 is now at (0,0)\n\t\tvar midPts = [[segmentLength, 0], [L / 2, flat ? 0 : h], [L - segmentLength, 0]];\n\n\t\t// Apply rotation\n\t\tvar midPtsRotated = midPts.map(function (pt) {\n\t\t\treturn __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* rotatePt */])(pt, theta);\n\t\t});\n\n\t\t// Translate back\n\t\tvar midPtsTranslated = midPtsRotated.map(function (pt) {\n\t\t\treturn [pt[0] + pt1[0], pt[1] + pt1[1]];\n\t\t});\n\n\t\treturn [pt1].concat(_toConsumableArray(midPtsTranslated), [pt2]);\n\t}\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Koch);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar Koch = __webpack_require__(3).default;\nvar Dragon = __webpack_require__(1).default;\nvar Hilbert = __webpack_require__(2).default;\n\n/**\n * When a message is received, calculate the points requested and post the results\n * back to the requesting script.\n * @param e\n */\nonmessage = function onmessage(e) {\n\ttry {\n\t\tvar points = void 0;\n\t\tswitch (e.data.algorithm) {\n\t\t\tcase 'HILBERT':\n\t\t\t\tpoints = Hilbert.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tcase 'KOCH':\n\t\t\tcase 'CESARO':\n\t\t\t\te.data.opts = _extends({}, e.data.opts, { full: e.data.algorithm === 'KOCH' });\n\t\t\t\tpoints = Koch.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tcase 'DRAGON':\n\t\t\t\tpoints = Dragon.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tpoints = [];\n\t\t\t\tbreak;\n\t\t}\n\t\tsend({\n\t\t\tinput: e.data,\n\t\t\toutput: points\n\t\t});\n\t} catch (error) {\n\t\tsend({\n\t\t\tinput: e.data,\n\t\t\terror: error.message\n\t\t});\n\t}\n};\n\n/**\n * Send a message back to the calling script.\n * @param data\n */\nfunction send(data) {\n\tpostMessage(JSON.stringify(data));\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// 33880a8fd14e2c4a254c.worker.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 33880a8fd14e2c4a254c","/**\n * Convert degrees to radians\n * @param deg\n * @returns {number}\n */\nexport function deg2Rad (deg) {\n\treturn deg * Math.PI / 180;\n}\n\n\n/**\n * Rotate a point in 2D space about the given center point.\n * @param pt    - the point [x,y] to rotate\n * @param angle - anticlockwise rotation in radians\n * @param center - optional center point to rotate around, default is [0, 0]\n * @returns {number[]}\n */\nexport function rotatePt(pt, angle, center) {\n\tif (angle === 0) {\n\t\treturn pt;\n\t}\n\tif (!center) {\n\t\tcenter = [0, 0];\n\t}\n\tconst _cos = Math.cos(angle);\n\tconst _sin = Math.sin(angle);\n\tconst ptTranslated = [\n\t\tpt[0] - center[0],\n\t\tpt[1] - center[1]\n\t];\n\tconst ptRotated = [\n\t\t_cos * ptTranslated[0] - _sin * ptTranslated[1],\n\t\t_sin * ptTranslated[0] + _cos * ptTranslated[1]\n\t];\n\n\t// translate back\n\treturn [\n\t\tcenter[0] + ptRotated[0],\n\t\tcenter[1] + ptRotated[1]\n\t];\n}\n\n/**\n * Return an array containing consecutive pairs of all points in the input\n * array.\n * @param arr\n * @returns {Array<any[]>}\n */\nexport function pairs (arr) {\n\treturn arr\n\t\t.map((val, i) => (i > 0 ? [arr[i - 1], arr[i]] : null))\n\t\t.slice(1);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web-worker/_utils.js","import {pairs} from './_utils';\n\nconst Dragon = {\n\n\tcalculatePoints (data) {\n\n\t\t// Completed curve has aspect ratio 1.502\n\n\t\tconst aspect = 1.502;\n\t\tlet size; // refers to smaller dimension, height in this case\n\n\t\tif (data.width >= aspect * data.height) {\n\t\t\tsize = data.height - 50;\n\t\t} else {\n\t\t\tsize = (data.width - 50) /  aspect;\n\t\t}\n\n\t\tsize /= aspect;\n\n\t\t// Theoretically use 0.5 to offset, but centroid gets skewed to top-left\n\t\t// because of the larger size changes caused by rotations during earlier\n\t\t// iterations. Using the below offsets gives a good center approximation\n\t\tconst x0 = data.width / 2 - 0.42 * size * aspect;\n\t\tconst y0 = data.height / 2 + 0.38 * size / aspect;\n\n\t\tconst pt1 = [x0, y0];\n\t\tconst pt2 = [x0 + size * aspect, y0];\n\t\tlet pts = [pt1, pt2];\n\t\tlet i = 0;\n\n\t\twhile (++i <= data.N) {\n\t\t\tlet _pairs = pairs(pts);\n\t\t\tlet numPairs = _pairs.length;\n\t\t\tlet ptGroups = _pairs\n\t\t\t\t.map((pair, j) => {\n\t\t\t\t\tconst getFlatValues = i < data.N ? false : data.flat;\n\t\t\t\t\treturn Dragon.getPointsBetween(pair[0], pair[1], getFlatValues, {right: j % 2 === 0});\n\t\t\t\t})\n\t\t\t\t.map((pts, j) => {\n\t\t\t\t\treturn (j + 1 < numPairs) ? pts.slice(0, -1) : pts\n\t\t\t\t});\n\n\t\t\tpts = Array.prototype.concat.apply([], ptGroups);\n\t\t}\n\n\t\treturn pts;\n\t},\n\n\tgetPointsBetween(pt1, pt2, flat, data) {\n\n\t\tif (flat) {\n\t\t\tconst center = [\n\t\t\t\t(pt1[0] + pt2[0]) / 2,\n\t\t\t\t(pt1[1] + pt2[1]) / 2\n\t\t\t];\n\t\t\treturn [pt1, center, pt2];\n\t\t}\n\n\t\tconst dX = pt2[0] - pt1[0];\n\t\tconst dY = pt2[1] - pt1[1];\n\n\t\tconst isAngled = dX !== 0 && dY !== 0;\n\t\tlet midPoint;\n\n\t\tif (!isAngled) {\n\t\t\tconst isVertical = dX === 0;\n\t\t\tlet direction;\n\t\t\tif (isVertical) {\n\t\t\t\tdirection = (dY < 0 && data.right) || (dY > 0 && !data.right) ? -1 : 1;\n\t\t\t\tmidPoint = [\n\t\t\t\t\tpt1[0] + direction * Math.abs(dY) / 2,\n\t\t\t\t\t(pt1[1] + pt2[1]) / 2\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tdirection = (dX < 0 && data.right) || (dX > 0 && !data.right) ? 1 : -1;\n\t\t\t\tmidPoint = [\n\t\t\t\t\t(pt1[0] + pt2[0]) / 2,\n\t\t\t\t\tpt1[1] + direction * Math.abs(dX) / 2,\n\t\t\t\t];\n\t\t\t}\n\t\t} else {\n\t\t\tconst a = [pt1[0], pt2[1]];\n\t\t\tconst b = [pt2[0], pt1[1]];\n\t\t\tconst aIsEast = a[0] < b[0];\n\t\t\tif ((dY < 0 && data.right) || (dY > 0 && !data.right)) {\n\t\t\t\tmidPoint = aIsEast ? a : b;\n\t\t\t} else {\n\t\t\t\tmidPoint = aIsEast ? b : a;\n\t\t\t}\n\t\t}\n\n\t\treturn [pt1, midPoint, pt2];\n\n\t}\n\n};\n\nexport default Dragon;\n\n\n// WEBPACK FOOTER //\n// ./src/web-worker/_dragon.js","import {deg2Rad, rotatePt} from './_utils';\n\n\nconst translate = (points, x, y) => {\n\treturn points.map(pt => [pt[0] + x, pt[1] + y]);\n};\n\nconst rotate = (points, center, angle) => {\n\tconst rad = deg2Rad(angle);\n\treturn points.map(pt => rotatePt(pt, rad, center));\n};\n\nconst flip = (points, center, angle) => {\n\treturn rotate(points, center, angle).reverse();\n};\n\n\nconst Hilbert = {\n\n\tcalculatePoints (data) {\n\n\t\tif (data.flat) {\n\t\t\t// Get points for previous iteration...\n\t\t\tconst prevPoints = Hilbert.calculatePoints({\n\t\t\t\t...data,\n\t\t\t\tflat: false,\n\t\t\t\tN: data.N - 1\n\t\t\t});\n\t\t\t// ... then replicate each point 4 times\n\t\t\treturn Array.prototype.concat.apply(\n\t\t\t\t[],\n\t\t\t\tprevPoints.map(val => new Array(4).fill(val))\n\t\t\t);\n\t\t}\n\n\t\tconst numRows = 2 ** data.N;\n\t\tconst size = Math.min(data.width, data.height) - 20;\n\t\tconst x0 = data.width / 2 - size / 2;\n\t\tconst y0 = data.height / 2 - size / 2;\n\n\t\tconst cellSize = size / numRows;\n\t\tconst halfCellSize = cellSize / 2;\n\n\t\tlet points = translate([\n\t\t\t[halfCellSize, halfCellSize],\n\t\t\t[halfCellSize, 3 * halfCellSize],\n\t\t\t[3 * halfCellSize, 3 * halfCellSize],\n\t\t\t[3 * halfCellSize, halfCellSize]\n\t\t], x0, y0);\n\n\t\tfor (let i = 2; i <= data.N; i++) {\n\t\t\tconst currCellSpacing = cellSize * 2 ** (i - 1);\n\t\t\tconst halfCurrCellSpacing = currCellSpacing / 2;\n\t\t\tpoints = [\n\t\t\t\t...flip(points, [x0 + halfCurrCellSpacing, y0 + halfCurrCellSpacing], -90),\n\t\t\t\t...translate(points, 0, currCellSpacing),\n\t\t\t\t...translate(points, currCellSpacing, currCellSpacing),\n\t\t\t\t...flip(translate(points, currCellSpacing, 0), [x0 + 3 * halfCurrCellSpacing , y0 + halfCurrCellSpacing], 90)\n\t\t\t];\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n};\n\nexport default Hilbert;\n\n\n// WEBPACK FOOTER //\n// ./src/web-worker/_hilbert.js","import {deg2Rad, rotatePt, pairs} from './_utils';\n\nconst Koch = {\n\n\tcalculatePoints (data) {\n\n\t\tif (!data.opts.full) {\n\n\t\t\t// Cesàro\n\t\t\treturn Koch.calculateSegmentPoints([0, 0], [data.width, 0], data.flat, data.N, data.opts)\n\n\t\t} else {\n\n\t\t\tdata.opts.angle = 60;\n\t\t\tconst size = Math.min(data.width, data.height) - 20;\n\t\t\tconst centroid = [data.width / 2, data.height / 2];\n\t\t\tconst basePts = [];\n\t\t\tconst refPt = [centroid[0], centroid[1] + size/2];\n\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tconst angle = -deg2Rad(120 * i);\n\t\t\t\tbasePts.push(rotatePt(refPt, angle, centroid));\n\t\t\t}\n\n\t\t\t// complete the loop\n\t\t\tbasePts.push(basePts[0]);\n\n\t\t\t// for each segment, calculate the points along that segment, reduce into single array.\n\t\t\tconst basePtPairs = pairs(basePts);\n\t\t\treturn basePtPairs.reduce((accum, pair) => {\n\t\t\t\treturn accum.concat(Koch.calculateSegmentPoints(pair[0], pair[1], data.flat, data.N, data.opts))\n\t\t\t}, []);\n\n\t\t}\n\t},\n\n\n\tcalculateSegmentPoints (pt1, pt2, flat, N, opts) {\n\t\tlet pts = [pt1, pt2];\n\t\tlet i = 0;\n\n\t\twhile (++i <= N) {\n\t\t\tlet _pairs = pairs(pts);\n\t\t\tlet numPairs = _pairs.length;\n\t\t\tlet ptGroups = _pairs\n\t\t\t\t.map((pair, j) => {\n\t\t\t\t\tconst getFlatValues = i < N ? false : flat;\n\t\t\t\t\treturn Koch.getPointsBetween(pair[0], pair[1], getFlatValues, opts);\n\t\t\t\t})\n\t\t\t\t.map((pts, j) => {\n\t\t\t\t\treturn (j + 1 < numPairs) ? pts.slice(0, -1) : pts\n\t\t\t\t});\n\n\t\t\tpts = Array.prototype.concat.apply([], ptGroups);\n\t\t}\n\n\t\treturn pts;\n\t},\n\n\n\tgetPointsBetween(pt1, pt2, flat, opts) {\n\n\t\tconst dX = pt2[0] - pt1[0];\n\t\tconst dY = pt2[1] - pt1[1];\n\n\t\t// angle between pt1 and pt2\n\t\tlet theta = Math.atan(dY / dX);\n\t\tif (dX < 0) {\n\t\t\ttheta += Math.PI;\n\t\t}\n\n\t\t// length of line joining pts\n\t\tconst L = Math.sqrt(dX ** 2 + dY ** 2);\n\n\t\tconst segmentLength = 0.5 * L / (1 + Math.sin(0.5 * deg2Rad(opts.angle)));\n\t\tconst h = Math.sqrt(L * (segmentLength - L / 4));\n\n\t\t// Now calculate points along that straight line segment,\n\t\t// with pts translated such that pt1 is now at (0,0)\n\t\tconst midPts = [\n\t\t\t[segmentLength, 0],\n\t\t\t[L / 2, flat ? 0 : h],\n\t\t\t[L - segmentLength, 0]\n\t\t];\n\n\t\t// Apply rotation\n\t\tconst midPtsRotated = midPts.map(pt => rotatePt(pt, theta));\n\n\t\t// Translate back\n\t\tconst midPtsTranslated = midPtsRotated.map(pt => {\n\t\t\treturn [\n\t\t\t\tpt[0] + pt1[0],\n\t\t\t\tpt[1] + pt1[1]\n\t\t\t];\n\t\t});\n\n\t\treturn [pt1, ...midPtsTranslated, pt2];\n\t}\n\n};\n\nexport default Koch;\n\n\n// WEBPACK FOOTER //\n// ./src/web-worker/_koch.js","'use strict';\n\nconst Koch = require('./_koch').default;\nconst Dragon = require('./_dragon').default;\nconst Hilbert = require('./_hilbert').default;\n\n/**\n * When a message is received, calculate the points requested and post the results\n * back to the requesting script.\n * @param e\n */\nonmessage = e => {\n\ttry {\n\t\tlet points;\n\t\tswitch (e.data.algorithm) {\n\t\t\tcase 'HILBERT':\n\t\t\t\tpoints = Hilbert.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tcase 'KOCH':\n\t\t\tcase 'CESARO':\n\t\t\t\te.data.opts = {...e.data.opts, full: e.data.algorithm === 'KOCH'};\n\t\t\t\tpoints = Koch.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tcase 'DRAGON':\n\t\t\t\tpoints = Dragon.calculatePoints(e.data);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tpoints = [];\n\t\t\t\tbreak;\n\t\t}\n\t\tsend({\n\t\t\tinput: e.data,\n\t\t\toutput: points\n\t\t});\n\t} catch (error) {\n\t\tsend({\n\t\t\tinput: e.data,\n\t\t\terror: error.message\n\t\t});\n\t}\n};\n\n\n/**\n * Send a message back to the calling script.\n * @param data\n */\nfunction send (data) {\n\tpostMessage(JSON.stringify(data));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/web-worker/worker.js"],"sourceRoot":""}